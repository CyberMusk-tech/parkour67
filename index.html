<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3D Parkour Game</title>
<style>
  body { margin:0; overflow:hidden; background:#1e1e1e; }
  canvas { display:block; }
  #instructions {
    position:absolute; top:10px; left:10px; color:white;
    font-family:sans-serif; font-size:16px;
  }
</style>
</head>
<body>
<div id="instructions">W/A/S/D = move, Space = jump</div>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.0/build/three.min.js"></script>
<script>
// Basic Three.js setup
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x1e1e1e);

const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
camera.position.set(0,5,10);

const renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// Lighting
const light = new THREE.DirectionalLight(0xffffff, 1);
light.position.set(5,10,7);
scene.add(light);

// Player
const player = new THREE.Mesh(
  new THREE.BoxGeometry(1,1,1),
  new THREE.MeshStandardMaterial({color:0xff0000})
);
player.position.y = 0.5;
scene.add(player);

// Platforms
const platforms = [];
function createPlatform(x,y,z,w,d){
  const plat = new THREE.Mesh(
    new THREE.BoxGeometry(w,0.5,d),
    new THREE.MeshStandardMaterial({color:0x00ff00})
  );
  plat.position.set(x,y,z);
  scene.add(plat);
  platforms.push(plat);
}
createPlatform(0,0,0,5,5);
createPlatform(5,0,-5,5,5);
createPlatform(10,1,-10,5,5);
createPlatform(15,2,-15,5,5);

// Controls
const keys = {};
document.addEventListener('keydown', e => keys[e.code]=true);
document.addEventListener('keyup', e => keys[e.code]=false);

let velocityY=0;
const gravity=-0.02;

function animate(){
  requestAnimationFrame(animate);

  if(keys['KeyW']) player.position.z -= 0.2;
  if(keys['KeyS']) player.position.z += 0.2;
  if(keys['KeyA']) player.position.x -= 0.2;
  if(keys['KeyD']) player.position.x += 0.2;

  // Jumping
  if(keys['Space'] && Math.abs(player.position.y-0.5)<0.01) velocityY=0.3;
  velocityY += gravity;
  player.position.y += velocityY;

  // Simple platform collision
  let onPlatform=false;
  platforms.forEach(p=>{
    if(player.position.x>p.position.x-2.5 && player.position.x<p.position.x+2.5 &&
       player.position.z>p.position.z-2.5 && player.position.z<p.position.z+2.5 &&
       player.position.y>p.position.y && player.position.y<p.position.y+0.5){
      onPlatform=true;
      player.position.y=p.position.y+0.5;
      velocityY=0;
    }
  });
  if(!onPlatform && player.position.y<0){
    player.position.y=0.5;
    velocityY=0;
  }

  // Camera follows player
  camera.position.x=player.position.x;
  camera.position.z=player.position.z+10;
  camera.lookAt(player.position);

  renderer.render(scene,camera);
}

animate();
</script>
</body>
</html>
